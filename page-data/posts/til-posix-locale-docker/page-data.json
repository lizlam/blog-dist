{"componentChunkName":"component---src-templates-post-template-post-template-tsx","path":"/posts/til-posix-locale-docker","result":{"data":{"markdownRemark":{"id":"452a0d44-f2e1-5e12-a775-005d0c2aae0a","html":"<p><em>Today I learned</em> that the default locale for an Ubuntu image in a Docker container is not what I expected it to be.  I was trying to view some Greek file names in a container and they did not\nappear correctly.  I immediately knew there must be something off with locale of the container.</p>\n<p>What is a locale? It’s how Linux systems determines which language and character set a user sees when they log into a terminal session.  What is the default locale when pulling down a fresh Ubuntu 16.04 image?</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">root@4ff94ee1780d:/# locale\nLANG=\nLANGUAGE=\nLC_CTYPE=\"POSIX\"\nLC_NUMERIC=\"POSIX\"\nLC_TIME=\"POSIX\"\nLC_COLLATE=\"POSIX\"\nLC_MONETARY=\"POSIX\"\nLC_MESSAGES=\"POSIX\"\nLC_PAPER=\"POSIX\"\nLC_NAME=\"POSIX\"\nLC_ADDRESS=\"POSIX\"\nLC_TELEPHONE=\"POSIX\"\nLC_MEASUREMENT=\"POSIX\"\nLC_IDENTIFICATION=\"POSIX\"\nLC_ALL=</code></pre></div>\n<p>What??!!  POSIX??!!! What’s the POSIX Locale?  The POSIX locale is another name for the C locale  (That’s ANSI C not the C Language)  which is another name for “if you expect to see any Unicode characters, haha, the jokes on you” locale.</p>\n<p>How to fix this?  Basically you need to add the <code class=\"language-text\">locale-gen</code> program to your container, generate and set the locale to something more appropriate.  This can be accomplished by adding the following to your Dockerfile:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">FROM ubuntu:16.04\n\nRUN apt-get clean &amp;&amp; apt-get update\nRUN apt-get install locales\nRUN locale-gen en_US.UTF-8  \nENV LANG en_US.UTF-8  \nENV LANGUAGE en_US:en  \nENV LC_ALL en_US.UTF-8 </code></pre></div>\n<p>After rebuilding my docker image and running it, I “ssh” (start an interactive bash session) into the container to check.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">root@15dc539c6e1c:/# locale\nLANG=en_US.UTF-8\nLANGUAGE=en_US:en\nLC_CTYPE=\"en_US.UTF-8\"\nLC_NUMERIC=\"en_US.UTF-8\"\nLC_TIME=\"en_US.UTF-8\"\nLC_COLLATE=\"en_US.UTF-8\"\nLC_MONETARY=\"en_US.UTF-8\"\nLC_MESSAGES=\"en_US.UTF-8\"\nLC_PAPER=\"en_US.UTF-8\"\nLC_NAME=\"en_US.UTF-8\"\nLC_ADDRESS=\"en_US.UTF-8\"\nLC_TELEPHONE=\"en_US.UTF-8\"\nLC_MEASUREMENT=\"en_US.UTF-8\"\nLC_IDENTIFICATION=\"en_US.UTF-8\"\nLC_ALL=en_US.UTF-8</code></pre></div>\n<p>Looks good.  Finally, I check the previous Greek test files and see that the characters are properly rendered.</p>","fields":{"slug":"/posts//posts/til-posix-locale-docker","tagSlugs":null},"frontmatter":{"date":"2017-06-21","description":"Today I learned that the default locale for an Ubuntu image in a Docker container is not what I expected.","tags":null,"title":"Today I Learned About the POSIX Locale and Docker","socialImage":null}}},"pageContext":{"slug":"/posts//posts/til-posix-locale-docker"}},"staticQueryHashes":["251939775","2764776372","401334301","63107425"]}