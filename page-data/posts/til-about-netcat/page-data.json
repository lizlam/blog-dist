{"componentChunkName":"component---src-templates-post-template-post-template-tsx","path":"/posts/til-about-netcat","result":{"data":{"markdownRemark":{"id":"cbc87f4f-43e9-5a14-8fb5-7b14b13b9e2c","html":"<p><em>Today I learned</em> about netcat, a utility written in 1995 for writing and reading data to TCP and UDP connections.\nIt’s been called the “swiss army knife” of network utilities and from the little bit I’ve experiemented with,\nI can see why!</p>\n<p>Although named <code class=\"language-text\">netcat</code>, the actual command you run is <code class=\"language-text\">nc</code>.  Here are a couple of examples of using <code class=\"language-text\">nc</code>\nthat I found interesting.</p>\n<p><strong>Scanning for a Port</strong></p>\n<p>Let’s say I’m running a webserver on localhost:4000 (<a href=\"https://jekyllrb.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Jekyll</a>’s default).</p>\n<p>I then run the following in a terminal:</p>\n<p><code class=\"language-text\">nc -v -z -w 1 localhost 3995-4000</code></p>\n<p><code class=\"language-text\">netcat</code> will scan through localhost’s port range 3995-4000, spitting out messages like this:</p>\n<p><img src=\"/media/nc-port-scan.png\" alt=\"Netcat Port Scan\">\nAt the very end, we can see that port 4000 was connected to successfully.</p>\n<p><strong>Serving up a Webpage for One Connection</strong></p>\n<p>Want to send a message through a webpage that can only be view once?  Ok, yeah I know. Who would want to do that?\n(Just work with me here!) <code class=\"language-text\">netcat</code> can do that!</p>\n<p>Create a file called <code class=\"language-text\">message.txt</code> with the following content:</p>\n<blockquote>\n<p>This message will self destruct as soon as you hit the refresh button.</p>\n</blockquote>\n<p>Execute the following:<br>\n<code class=\"language-text\">{ echo -ne \"HTTP/1.0 200 OK\\r\\nContent-Length: $(wc -c &lt;message.txt)\\r\\n\\r\\n\"; cat message.txt; } | nc -l 8080</code></p>\n<p>Now, if I open up a browser and point to ’<a href=\"http://localhost:8080\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://localhost:8080</a>’, I will see my message.  If I refresh the page,\nthe page goes away.  <code class=\"language-text\">netcat</code> serves the file and exits as soon as the first client hits it.  Pretty cool, huh?</p>\n<p><strong>Creating a Backdoor</strong></p>\n<p>Using <code class=\"language-text\">netcat</code> with the <code class=\"language-text\">-e</code> flag,  you can create backdoors to your systems (<code class=\"language-text\">-e</code> forks the process and redirects input/output).  It is possible to make any process a network server, listen on a port, and pipe the input to that process.  This is similar to SSH reverse tunneling.</p>\n<p>Let’s say you have 2 computers on the same network.<br>\nOn the 1st computer, run:</p>\n<p><code class=\"language-text\">nc -l -p 1777 -e /bin/sh</code></p>\n<p>On the 2nd computer, run:</p>\n<p><code class=\"language-text\">nc &lt;IP_ADDRESS_OF_1ST_COMPUTER> 1777</code></p>\n<p>Now, type any shell command like <code class=\"language-text\">ls</code> or <code class=\"language-text\">touch i_see_you.txt</code> and see the commands get executed on the first computer.  Way cool!</p>\n<p>I didn’t know anything about <code class=\"language-text\">netcat</code> before today, but the tiny bit I’ve discovered tells me it’s going to be a valuable tool to have in my toolbox.</p>","fields":{"slug":"/posts//posts/til-about-netcat","tagSlugs":null},"frontmatter":{"date":"2017-04-08","description":"Today I learned about netcat.","tags":null,"title":"Today I Learned About Netcat","socialImage":null}}},"pageContext":{"slug":"/posts//posts/til-about-netcat"}},"staticQueryHashes":["251939775","2764776372","401334301","63107425"]}