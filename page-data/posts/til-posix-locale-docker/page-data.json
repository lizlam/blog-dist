{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/til-posix-locale-docker","result":{"data":{"markdownRemark":{"id":"c4045d69-9364-5b2d-9c8d-aed80bbec13c","html":"<p><em>Today I learned</em> that the default locale for an Ubuntu image in a Docker container is not what I expected it to be.  I was trying to view some Greek file names in a container and they did not\nappear correctly.  I immediately knew there must be something off with locale of the container.</p>\n<p>What is a locale? It’s how Linux systems determines which language and character set a user sees when they log into a terminal session.  What is the default locale when pulling down a fresh Ubuntu 16.04 image?</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">root@4ff94ee1780d:/# locale\nLANG=\nLANGUAGE=\nLC_CTYPE=&quot;POSIX&quot;\nLC_NUMERIC=&quot;POSIX&quot;\nLC_TIME=&quot;POSIX&quot;\nLC_COLLATE=&quot;POSIX&quot;\nLC_MONETARY=&quot;POSIX&quot;\nLC_MESSAGES=&quot;POSIX&quot;\nLC_PAPER=&quot;POSIX&quot;\nLC_NAME=&quot;POSIX&quot;\nLC_ADDRESS=&quot;POSIX&quot;\nLC_TELEPHONE=&quot;POSIX&quot;\nLC_MEASUREMENT=&quot;POSIX&quot;\nLC_IDENTIFICATION=&quot;POSIX&quot;\nLC_ALL=</code></pre></div>\n<p>What??!!  POSIX??!!! What’s the POSIX Locale?  The POSIX locale is another name for the C locale  (That’s ANSI C not the C Language)  which is another name for “if you expect to see any Unicode characters, haha, the jokes on you” locale.</p>\n<p>How to fix this?  Basically you need to add the <code class=\"language-text\">locale-gen</code> program to your container, generate and set the locale to something more appropriate.  This can be accomplished by adding the following to your Dockerfile:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">FROM ubuntu:16.04\n\nRUN apt-get clean &amp;&amp; apt-get update\nRUN apt-get install locales\nRUN locale-gen en_US.UTF-8  \nENV LANG en_US.UTF-8  \nENV LANGUAGE en_US:en  \nENV LC_ALL en_US.UTF-8 </code></pre></div>\n<p>After rebuilding my docker image and running it, I “ssh” (start an interactive bash session) into the container to check.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">root@15dc539c6e1c:/# locale\nLANG=en_US.UTF-8\nLANGUAGE=en_US:en\nLC_CTYPE=&quot;en_US.UTF-8&quot;\nLC_NUMERIC=&quot;en_US.UTF-8&quot;\nLC_TIME=&quot;en_US.UTF-8&quot;\nLC_COLLATE=&quot;en_US.UTF-8&quot;\nLC_MONETARY=&quot;en_US.UTF-8&quot;\nLC_MESSAGES=&quot;en_US.UTF-8&quot;\nLC_PAPER=&quot;en_US.UTF-8&quot;\nLC_NAME=&quot;en_US.UTF-8&quot;\nLC_ADDRESS=&quot;en_US.UTF-8&quot;\nLC_TELEPHONE=&quot;en_US.UTF-8&quot;\nLC_MEASUREMENT=&quot;en_US.UTF-8&quot;\nLC_IDENTIFICATION=&quot;en_US.UTF-8&quot;\nLC_ALL=en_US.UTF-8</code></pre></div>\n<p>Looks good.  Finally, I check the previous Greek test files and see that the characters are properly rendered.</p>","fields":{"slug":"/posts/til-posix-locale-docker","tagSlugs":null},"frontmatter":{"date":"2017-06-21","description":"Today I learned that the default locale for an Ubuntu image in a Docker container is not what I expected.","tags":null,"title":"Today I Learned About the POSIX Locale and Docker","socialImage":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/til-posix-locale-docker"}}}